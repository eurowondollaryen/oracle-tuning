## 수많은 IT 회사에서 Docker를 왜 쓰는가?
- Docker를 사용하지 않고 개발 환경을 구성할 경우, 그 머신에 맞는 수많은 세팅 작업을 해줘야 하지만,
- Docker를 사용하게 되면 개발 환경에 대한 세팅을 할 필요가 없다.
- 여기서 개발 환경이라 함은, 개발할 때 사용되는 프로그램 간의 의존성 등을 의미한다.( 뭐 설치하려니까 뭐가 없고, 뭐가 없고..)

## What is Docker?
- 컨테이너를 사용하여 응용프로그램을 더 쉽게 만들고 배포하고 실행할 수 있도록 설계된 도구,
- 컨테이너 기반의 오픈소스 가상화 플랫폼이며 생태계이다.

## What is Container?
- 서버에서의 컨테이너 개념
- 다양한 프로그램, 실행환경을 컨테이너로 추상화, 동일한 인터페이스를 제공하여, 프로그램의 배포 및  관리를 단순하게 해준다.
- 동일 프로그램을 AWS, Azure, Google cloud 등 어디에서든 실행 가능하게 해준다.

### What is Docker Container?
- 코드, 모든 종속성을 패키지화하여 응용프로그램이 한 컴퓨팅 환경에서 다른 컴퓨팅 환경으로 빠르고 안정적으로 실행되도록 하는 소프트웨어의 표준 단위이다.

### What is Container Image?
- 코드, 런타임, 시스템 도구, 시스템 라이브러리 및 설정과 같은 응용 프로그램을 실행하는 데 필요한 모든 것을 포함하는 가볍고 독립적이며 실행 가능한 소프트웨어 패키지

> 그냥 이미지와 컨테이너는
> 프로그램과 프로세스, 클래스와 인스턴스의 차이와 비슷하다고 생각하면 이해가 쉽다.

## Docker 사용 시 흐름
Docker client(CLI)에 명령어를 입력하면 Docker Server(Daemon)에서 실행해주는 방식
명령어를 실행해보자.
1.  docker run hello-world

위 명령어의 동작 과정
	1. Docker client 에 docker run hello-world 입력
	2. Docker server에 해당 명령어 전달
	3. 이미지 Cache에 hello-world라는 이미지가 있는지 확인.
	4. 없다면 이미지를 Docker 허브(이미지들을 보관해주는 곳)에서 가져온다.
	5. 그 후 가져온 이미지를 실행한다.

## Container에 대한 이해
	1. 가상화 기술이 나오기 전?
	하나의 서버를 하나의 용도로만 사용.
	남는 서버 공간은 그대로 방치한다.
	=> 안정적이지만, 비효율적이다.
	
	2. 하이퍼바이저 기반의 가상화 출현
	호스트 시스템에서 다양한 게스트 OS를 구동할 수 있게 해주는 소프트웨어.
	하드웨어를 가상화하여 각각의 VM을 모니터링 하는 중간 관리자.
	
	하이퍼바이저 : 네이티브 하이퍼바이저 / 호스트형 하이퍼바이저 가 있다. 주로 호스트형 하이퍼바이저를 잘 쓴다.
	네이티브 하이퍼바이저 : 하이퍼바이저가 직접 하드웨어를 제어하여, 오버헤드가 적으나, 여러 하드웨어 드라이버를 세팅해야 하므로, 설치가 어렵다.
	호스트형 하이퍼바이저 : 하이퍼바이저를 HOST OS 위에서 실행하여, OS 종류에 대한 제약이 없고 대신, 오버헤드가 크다. 하지만 구현이 쉬우므로 많이 이용하는 방법이다.
	
	하이퍼바이저 기반의 VM 구조 : 각 VM별로 격리되어, 에러가 퍼지지 않는다.
	
	Docker의 container 기술은 그냥 나온게 아니라 VM으로부터 파생되어 나왔다.

	3. Docker Container vs VM
	공통점 : 기본 하드웨어에서 격리된 환경 내에 애플리케이션을 배치하는 방법
	격리된 환경을 얼마나 격리시키느냐의 차이
	
	차이점
	- Container는 GUEST OS가 따로 없어서 가볍다
	- Application을 실행하기 위해 Docker는 Host OS 위에 어플리케이션 실행 패키지인 이미지를 배포하기만 하면 되는데, VM은 VM 띄우고 자원할당, 게스트 os 부팅. 훨씬 복잡하고 무겁다.
	- Docker 컨테이너는 동일한 커널을 공유한다. 따라서, 실행되는 프로세스는 호스트 시스템 내에서 볼 수 있다.
	- VM은 비교적 사용 방법이 간단할 수 있지만, 매우 느리다.

      그럼 Docker는 어떻게 돌아가나?
Docker 컨테이너에 대한 격리를 어떻게 시키는거야?
리늑스에서 쓰이는 C Group, 네임스페이스에 대해 알아야 한다.
=> 컨테이너, 호스트에서 실행되는 다른 프로세스 사이에 벽을 만드는 리눅스 커널 기능이다.
C Group : CPU, 메모리, 네트워크 Bandwidth, HD I/O 등 프로세스 그룹의 시스템 리소스 사용량을 관리.
(어떤 어플이 사용량이 너무 많다면, 그 어플리케이션 같은 것을 C group에 집어넣어서 CPU와 메모리 사용을 제한할 수 있다.
네임스페이스 : 하나의 시스템에서 프로세스를 격리시킬 수 있는 가상화 기술. 별개의 독립된 공간을 사용하는 것처럼, 격리된 환경을 제공하는 경량 프로세스 가상화 기술(즉, 컨테이너를 싸주는 기술)
즉, Container 는 C group과 네임스페이스를 사용해서 만들어진 기술이다.
     

## 이미지로 컨테이너를 만들기
이미지 : 프로그램을 실행하는 데 필요한 설정, 종속성을 갖고있다.(응용 프로그램을 실행하는 데 필요한 모든 것을 포함하고 있습니다.)
이미지를 이용해서 컨테이너를 만드는데 필요한 것?
	1. 컨테이너가 시작될 때 실행되는 명령어(run kakaotalk)
	2. 파일 스냅샷(컨테이너에서 카카오톡을 실행하고 싶다면, 카카오톡 파일을 스냅샷)

이미지로 컨테이너 만드는 순서
	1. docker run [이미지명]
	2. 도커 이미지에 있는 파일 스냅샷을 컨테이너 하드 디스크에 옮겨준다.

## Cgroup, 네임스페이스를 Docker 환경에서 사용할 수 있는 이유?
컨테이너 (이미지, 호스트OS 커널, 하드디스크 일부안에 있는 파일 시스템)
Cgroup, 네임스페이스는 리눅스에서 사용하는 것인데, 어떻게 macOS, windows에서 사용 가능할까?

docker version을 입력하면 OS가 리눅스라고 나온다.
사실 내부적으로는 아래와 같은 구조다.

> (카톡 컨테이너, Mysql 컨테이너, Node.js 컨테이너)
> (리눅스 커널) - Cgroup, namespace
> (리눅스 VM)

> MacOS/Windows (호스트OS)
> 하드웨어(냬컴퓨터)
