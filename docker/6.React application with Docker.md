# Docker를 활용하여 React 애플리케이션 개발

## 1. React 환경세팅
- 프로젝트 세팅 : npx create-react-app react-app [설치하고자 하는 디렉토리 이름]
- 실행 : npm run start
- 테스트 : npm run test
- 빌드(build 폴더가 생성된다.) : npm run build

## 2. Docker를 이용해서 React 앱 실행
- 목표 : container 안에서 React 앱을 실행해야 한다.
- 현재까지는 Dockerfile을 한 가지만 만들었지만, 배포 후를 위해 개발환경(Dockerfile.dev), 운영환경 따로 작성하는 게 좋다.
- Dockerfile.dev로 이미지 빌드 시 주의할 점 : unable to evaluate symlink 에러 발생. 빌드 시 dockerfile을 찾을 수 없다는 의미. dockerfile.dev를 dockerfile로 인식시켜야 한다.
- build 시 참조할 Dockerfile을 임의로 설정하기 : docker build -f Dockerfile.dev .
- node:alpine ? : node 베이스이미지를 위해서 꼭 필요한 부분만을 담아놓은 이미지

### React 앱 빌드 시 주의할 점
- COPY ./ ./ 을 하게되면, node_modules도 다 컨테이너에 카피하게 된다. 그러므로 빌드시간이 길어지게 됨.
- 그럼 어떻게 해야할까? => 어차피 docker 환경에서 실행하니까 지워줘도 된다.

### React 앱 빌드 및 실행
1. build : docker build -f Dockerfile.dev -t sehoakasayho/react .
2. run : docker run -it -p 3000:3000 sehoakasayho/react
> 참고 : react에서 -it 옵션을 주지 않으면 바로 shell 빠져나가게 한다고 함.

## 3. React 앱을 Docker volume으로 실행하기
### COPY 와 VOLUME의 차이
- COPY : 로컬(HOST OS)의 파일을 컨테이너에 복사
- VOLUME : 로컬(HOST OS)의 파일을 컨테이너에서 참조

## VOLUME을 사용해서 애플리케이션 실행하는 방법
- docker run -p 3000:3000 -v /usr/src/app/node_modules -v %cd%:/usr/src/app [image id]
- -v /usr/src/app/node_modules : 호스트 디렉토리에 node_modules는 없으므로, 컨테이너에 매핑하지 말라



