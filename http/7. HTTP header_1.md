## 7. HTTP 헤더 - 일반 헤더
### HTTP 헤더
- HTTP 전송에 필요한 모든 부가정보(key-value 형태)
- 필요 시 임의의 헤더를 추가 가능

### 과거의 HTTP 헤더 분류
- General 헤더 : 메시지 전체에 적용되는 정보 ex) Connection: close
- Request 헤더 : 요청 정보 ex) User-Agent: Mozilla/5.0
- Response 헤더 : 응답 정보, ex) Server: Apache
- Entity 헤더 : 엔티티 바디 정보 ex) Content-Type: text/html, Content-Length: 3423

### HTTP BODY - RFC2616 (1999~2014)
- message body : HTTP 전체에서 BODY 부분
- entity body : 요청이나 응답에서 전달할 실제 데이터
- entity header : entity body의 데이터를 해석할 수 있는 정보를 제공(데이터 유형(html, json), 데이터 길이, 압축 정보 ..)

### RFC723x
- entity -> Representation(표현)
- message body == payload
- Representation == Representation header + body
> 용어만 entity -> representation 으로 바뀜.
> 왜 표현으로 바뀐걸까? => 리소스에 대한 것을 html 또는 json등 어쨌든 어떠한 표현방식을 통해 응답하기 때문에 표현이라는 단어를 씀.

### 7-1. HTTP 헤더 - 표현
- 표현 : 내가 데이터를 보낼건데, 어떤 식으로 전송할거야 라는것을 알려주는 부분(json, html...)
- 표현 헤더는 전송, 응답에서 모두 사용한다.

- Content-Type: 표현 데이터의 형식
  - ex) text/html; charset=utf-8, application/json, image/png
- Content-Encoding: 표현 데이터의 압축 방식, 전달하는 쪽에서 압축 후 해당 헤더를 추가, 수신자는 해당 헤더를 보고 압축 해제.
  - ex) gzip, deflate, identity(압축 안해)
- Content-Language: 표현 데이터의 자연 언어
  - ex) ko, en, en-US (이 부분이 보통 웹사이트에서 언어선택하는 부분이 됨.)
- Content-Length: 표현 데이터의 길이(byte)
  - Transfer-Encoding(전송 코딩)을 사용하면 Content-Length를 사용하면 안 된다.
  
### 7-2. 협상(콘텐츠 네고시에이션)
- 클라이언트가 선호하는 표현 요청
- Accept: 클라이언트가 선호하는 미디어 타입 전달
- Accept-Charset: 클라이언트가 선호하는 문자 인코딩
- Accept-Encoding: 클라이언트가 선호하는 압축 인코딩
- Accept-Language: 클라이언트가 선호하는 자연 언어
> 협상 헤더는 요청시에만 사용

### 콘텐츠 네고시에이션 사용 방법
- client에서 Accept-Language: ko 를 헤더에 넣고 request하면,
- 서버는 그에 맞는 언어의 response를 한다.
> 만약, 서버가 지원하는 언어가 독일어, 영어 뿐인데, 클라이언트가 ko로 요청하면?

### 콘텐츠 네고시에이션 - 우선순위
- 클라이언트가 우선순위를 함께 보내줄 수 있음.
- 우선순위: 0~1, 클수록 높은 우선순위를 갖는다.
- ex) Accept-Language: ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7
> 해석하면, 한국어 - 미국영어 - 영어 순으로 response한다.

### 콘텐츠 네고시에이션 - 우선순위2
- 구체적인 옵션이 우선된다.
- ex) Accept: text/*, text/plain, text/plain;format=flowed, */*

### 콘텐츠 네고시에이션 - 우선순위3
- 구체적인 것을 기준으로 미디어 타입을 맞춘다.
- Accept: text/*;q=0.3, text/html;q=0.7, text/html;level=1, text/html;level=2;q=0.4, */*;q=0.5
> 이렇게 되어있을 경우, 우선순위는?